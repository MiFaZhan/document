æŠŠåç«¯æ‰€æœ‰çš„åˆ†é¡µéƒ½æ”¹æˆä½¿ç”¨ ElasticSearch åˆ†é¡µæŸ¥è¯¢ï¼Œå‰ç«¯ä¸éœ€è¦ä»»ä½•æ”¹åŠ¨

æ”¹å®Œè·‘å•æµ‹æµ‹è¯•

|1. ä¿å•åˆ—è¡¨ TbInsurancePolicyController. List | âœ… å·²ç”¨ ES |
| 2. æ ¹æ®è½¦ä¸»å§“åç­›é€‰ä¿å• | TbInsurancePolicyController. GetByName | âŒ æœªç”¨ ES | 

| 3. é…ä»¶åˆ—è¡¨ | TbVehicleAccessoryController. List | âœ… å·²ç”¨ ES |
| 4. é…ä»¶è®¢å•åˆ—è¡¨ | TbVehicleAccessoryOrderController. List | âš ï¸ æ··åˆï¼ˆES+PageHelperï¼‰
| 5. ç»´ä¿®å•åˆ—è¡¨ | TbInsuranceRepairController. List | âš ï¸ æ··åˆ |
| 6. é¢„çº¦å•åˆ—è¡¨ | TbInsurancePreorderController. List | âš ï¸ æ··åˆ |
| 7. ä¾›åº”å•†è®¢å•åˆ—è¡¨ | TbProviderOrderController. List | âš ï¸ æ··åˆ | 
| 8. ç†èµ”åˆ—è¡¨ | TbInsuranceClaimController. List | âŒ æœªç”¨ ES | 
| 9. å”®åè®°å½•åˆ—è¡¨ | TbAfterSalesServiceRecordController. List | âŒ æœªç”¨ ES |


| ä¸šåŠ¡åç§°        | ä»£ç ä½ç½®                                      | ES  |     |
| ----------- | ----------------------------------------- | --- | --- |
| ä¿é™©å•åˆ—è¡¨       | TbInsurancePolicyController. List         | âœ…   |     |
| æ ¹æ®è½¦ä¸»å§“åç­›é€‰ä¿é™©å• | TbInsurancePolicyController. GetByName    | âŒ   | å·²æ›´æ”¹ |
| æŠ¥æ¡ˆåˆ—è¡¨        | TbInsuranceClaimController. List          | âŒ   | å·²æ›´æ”¹ |
| é…ä»¶åˆ—è¡¨        | TbVehicleAccessoryController. List        | âœ…   |     |
| é…ä»¶è®¢å•åˆ—è¡¨      | TbVehicleAccessoryOrderController. List   | âŒ   | å·²æ›´æ”¹ |
| ç»´ä¿®å•åˆ—è¡¨       | TbInsuranceRepairController. List         | âŒ   | å·²æ›´æ”¹ |
| é¢„è®¢å•åˆ—è¡¨       | TbInsurancePreorderController. List       | âŒ   | å·²æ›´æ”¹ |
| ä¾›åº”å•†é¢„è®¢å•åˆ—è¡¨    | TbProviderOrderController. List           | âŒ   | å·²æ›´æ”¹ |
| å”®åæœåŠ¡åˆ—è¡¨      | TbAfterSalesServiceRecordController. List | âŒ   | å·²æ›´æ”¹ |
åˆ æ‰å…¨å±€æœç´¢çš„æŠ¥æ¡ˆå·æŸ¥è¯¢
### ES æ•°æ®åº“

#### å‘½ä»¤

```
curl -X GET "http://113.44.157.104:9200/_cat/indices?v"

# æŸ¥çœ‹æ‰€æœ‰ç´¢å¼•ï¼ˆJSONæ ¼å¼ï¼‰
curl -X GET "http://113.44.157.104:9200/_all"

# åˆ é™¤æŒ‡å®šçš„ç´¢å¼•
curl -X DELETE "http://113.44.157.104:9200/tb_vehicle_accessory"

curl -X GET "http://113.44.157.104:9200/_cat/plugins?v"

curl -X GET "http://113.44.157.104:9200/claim_index/_settings?pretty"



```

#### é‡å»º

åˆ é™¤ ES ç´¢å¼•åº“
æœ¬åœ°è¿è¡Œä¸€ä¸‹é¡¹ç›®å°±ä¼šè‡ªåŠ¨å»ºåº“
Com. Ruoyi. Lvguan. Controller. ESController
å‘ä¸€ä¸‹åŒæ­¥æ•°æ®




å…·ä½“ä»»åŠ¡æ¸…å•
æ¸…ç†æ··åˆæ¨¡å¼ï¼ˆ4 ä¸ªæ¥å£ï¼Œçº¦ 2 å¤©ï¼‰

ç§»é™¤ Controller å±‚çš„ startPage () è°ƒç”¨
Service å±‚å·²æœ‰ ES æŸ¥è¯¢ï¼Œåªéœ€ç¡®ä¿åˆ†é¡µå‚æ•°æ­£ç¡®ä¼ é€’
æ–°å¢ ES æ”¹é€ ï¼ˆ3 ä¸ªæ¥å£ï¼Œçº¦ 3-4.5 å¤©ï¼‰

TbInsurancePolicyController. GetByName - æ”¹ç”¨ ES æŸ¥è¯¢
TbInsuranceClaimController. List - éœ€æ–°å»º ES ç´¢å¼•å’ŒæŸ¥è¯¢
TbAfterSalesServiceRecordController. List - éœ€æ–°å»º ES ç´¢å¼•å’ŒæŸ¥è¯¢
æµ‹è¯•éªŒè¯ï¼ˆçº¦ 1 å¤©ï¼‰

éªŒè¯åˆ†é¡µå‚æ•°ï¼ˆpageNum/pageSizeï¼‰æ­£ç¡®ä¼ é€’
éªŒè¯è¿”å›çš„ total å’Œ rows æ ¼å¼ä¸å˜


æˆ‘ä¸ºæ‚¨å°†æä¾›çš„è¡¨æ ¼å†…å®¹è½¬æ¢æˆäº†Markdownæ ¼å¼ï¼Œå¹¶åŸºäºRuoYiæ¡†æ¶çš„åˆ†é¡µæœºåˆ¶ç‰¹ç‚¹ï¼Œè¡¥å……äº†å®ç°æ–¹å¼çš„è¯´æ˜ã€‚

### ğŸ“Š ruoyi-platform æ¨¡å—åˆ†é¡µæŸ¥è¯¢æ¥å£æ±‡æ€»

ä¸‹è¡¨æ±‡æ€»äº†æ‚¨æä¾›çš„ `ruoyi-platform`æ¨¡å—ä¸­çš„åˆ†é¡µæŸ¥è¯¢æ¥å£ä¿¡æ¯ã€‚

|åºå·|Controller|æ¥å£è·¯å¾„|åŠŸèƒ½æè¿°|
|---|---|---|---|
|1|TbAfterSalesServiceRecordController|`/list`|å”®åæœåŠ¡è®°å½•åˆ—è¡¨|
|2|TbInsuranceClaimController|`/list`|ä¿é™©ç†èµ”åˆ—è¡¨ï¼ˆæ”¯æŒå…³é”®è¯ã€ç”µè¯ã€çŠ¶æ€ã€å…¬å¸åç­›é€‰ï¼‰|
|3|TbInsuranceCompanyController|`/list`|ä¿é™©å…¬å¸åˆ—è¡¨ï¼ˆ**å·²æ³¨é‡Š**ï¼‰|
|4|TbInsurancePolicyController|`/list`|ä¿é™©ä¿å•åˆ—è¡¨ï¼ˆæ”¯æŒå¤šæ¡ä»¶ç­›é€‰ï¼šå…³é”®è¯ã€ä¿é™©å…¬å¸ã€æ—¥æœŸã€è½¦å‹ã€ä¿è´¹èŒƒå›´ã€åŒºåŸŸã€çŠ¶æ€ï¼‰|
|5|TbInsurancePolicyController|`/getByName`|æŒ‰åç§°æŸ¥è¯¢ä¿å•|
|6|TbInsurancePolicyController|`/list`|ä¿é™©é¢„è®¢å•åˆ—è¡¨ï¼ˆæ”¯æŒé¢„è®¢å•ç¼–ç ã€çŠ¶æ€ç­›é€‰ï¼‰|
|7|TbInsuranceRepairController|`/list`|ä¿é™©ç»´ä¿®å•åˆ—è¡¨|
|8|TbProviderOrderController|`/list`|ä¾›åº”å•†è®¢å•åˆ—è¡¨|
|9|TbVehicleAccessoryController|`/list`|è½¦è¾†é…ä»¶åˆ—è¡¨ï¼ˆæ”¯æŒå…³é”®è¯ã€æ—¥æœŸèŒƒå›´ç­›é€‰ï¼‰|
|10|TbVehicleAccessoryOrderController|`/list`|é…ä»¶è®¢å•åˆ—è¡¨ï¼ˆæ”¯æŒå…³é”®è¯ã€æ—¥æœŸèŒƒå›´ã€çŠ¶æ€ç­›é€‰ï¼‰|

### âš™ï¸ åˆ†é¡µå®ç°æ–¹å¼è¯¦è§£

æ‚¨æåˆ°çš„åˆ†é¡µå®ç°æ–¹å¼æ˜¯åŸºäºRuoYiæ¡†æ¶çš„å…¸å‹åšæ³•ï¼Œå…¶æ ¸å¿ƒæµç¨‹å’Œå…³é”®ç‚¹å¦‚ä¸‹ï¼š

1. **Controllerå±‚å¯åŠ¨åˆ†é¡µ**
    
    åœ¨Controlleræ–¹æ³•ä¸­è°ƒç”¨ `startPage()`æ–¹æ³•ã€‚è¯¥æ–¹æ³•å†…éƒ¨ä½¿ç”¨ `PageHelper`æ’ä»¶ï¼Œä¼šä»å½“å‰HTTPè¯·æ±‚ä¸­è‡ªåŠ¨æå– `pageNum`ï¼ˆé¡µç ï¼‰å’Œ `pageSize`ï¼ˆé¡µå¤§å°ï¼‰å‚æ•°ï¼Œå¹¶é€šè¿‡ `ThreadLocal`å­˜å‚¨åˆ†é¡µä¿¡æ¯ã€‚éšåæ‰§è¡Œçš„ç¬¬ä¸€ä¸ªMyBatisæŸ¥è¯¢è¯­å¥ä¼šè¢«è‡ªåŠ¨æ‹¦æˆªå¹¶æ”¹å†™ä¸ºåˆ†é¡µSQLã€‚
    
2. **å°è£…è¿”å›ç»“æœ**
    
    æŸ¥è¯¢ç»“æŸåï¼Œä½¿ç”¨ `getDataTable(List<?> list)`æ–¹æ³•å°†ç»“æœåˆ—è¡¨å°è£…æˆæ ‡å‡†çš„ `TableDataInfo`å¯¹è±¡ã€‚è¯¥å¯¹è±¡åŒ…å« `rows`ï¼ˆå½“å‰é¡µæ•°æ®åˆ—è¡¨ï¼‰å’Œ `total`ï¼ˆæ€»è®°å½•æ•°ï¼‰ç­‰å…³é”®å­—æ®µï¼Œè¿”å›ç»™å‰ç«¯ã€‚æ¡†æ¶é€šè¿‡ `PageInfo`å·¥å…·ç±»ä» `ThreadLocal`ç¼“å­˜ä¸­è·å–æ€»è®°å½•æ•°ã€‚
    
3. **é˜²æ­¢SQLæ±¡æŸ“**
    
    è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„å®è·µã€‚å¦‚æœåœ¨ä¸€æ¬¡è¯·æ±‚ä¸­å¯åŠ¨äº†åˆ†é¡µä½†åç»­å¯èƒ½è¿˜æœ‰å…¶ä»–æ•°æ®åº“æŸ¥è¯¢ï¼Œä¸»åŠ¨è°ƒç”¨ `PageHelper.clearPage()`å¯ä»¥æ¸…é™¤ `ThreadLocal`ä¸­çš„åˆ†é¡µå‚æ•°ï¼Œé¿å…å…¶æ„å¤–åœ°ä½œç”¨äºå…¶ä»–æŸ¥è¯¢ï¼Œé€ æˆâ€œè«åå…¶å¦™çš„åˆ†é¡µâ€ã€‚
    
4. **ä¸MyBatis-Plusçš„ååŒä½¿ç”¨**
    
    éƒ¨åˆ†Serviceå±‚å¦‚æœä½¿ç”¨äº†MyBatis-Plusçš„ `Page`å¯¹è±¡ï¼Œé€šå¸¸æ˜¯ä¸ºäº†è¿›è¡Œæ›´å¤æ‚çš„è‡ªå®šä¹‰åˆ†é¡µé€»è¾‘ã€‚å…¶æœ¬è´¨ä»ç„¶æ˜¯ä¾é  `PageHelper`åœ¨Mapperå±‚æ‹¦æˆªSQLå®ç°åˆ†é¡µæŸ¥è¯¢ï¼Œè€ŒMyBatis-Plusçš„ `Page`å¯¹è±¡åˆ™ç”¨äºæ‰¿è½½ç»“æœå’Œåˆ†é¡µä¿¡æ¯ã€‚
    

å¸Œæœ›è¿™ä»½æ•´ç†å¯¹æ‚¨æœ‰å¸®åŠ©ï¼å¦‚æœæ‚¨éœ€è¦äº†è§£æŸä¸ªæ¥å£æ›´å…·ä½“çš„å®ç°ç»†èŠ‚ï¼Œæˆ‘å¯ä»¥å°è¯•ä¸ºæ‚¨è¿›ä¸€æ­¥åˆ†æã€‚

### æµ‹è¯•
YDD1765342844974

```
{
    "total": 1,
    "rows": [
        {
            "createBy": null,
            "createTime": "2025-12-10 13:01:31",
            "updateBy": null,
            "updateTime": "2025-12-10 13:01:31",
            "remark": null,
            "id": "2669",
            "providerId": 220,
            "preorderId": 1990322074609549386,
            "accessoryId": 2669,
            "accessoryAmount": 1,
            "accessoryName": "12.10",
            "providerUnitPrice": "111",
            "plateNumber": "äº¬RAAAAB",
            "status": 3,
            "preorderCode": "YDD1765342844974"
        }
    ],
    "code": 200,
    "msg": "æŸ¥è¯¢æˆåŠŸ"
}


å¯¹ç…§
{
    "total": 1,
    "rows": [
        {
            "createBy": null,
            "createTime": "2025-12-10 13:01:31",
            "updateBy": null,
            "updateTime": "2025-12-10 13:01:31",
            "remark": null,
            "id": "2669",
            "providerId": 220,
            "preorderId": 1990322074609549386,
            "accessoryId": 2669,
            "accessoryAmount": 1,
            "accessoryName": "12.10",
            "providerUnitPrice": "111",
            "plateNumber": "äº¬RAAAAB",
            "status": 3,
            "preorderCode": "YDD1765342844974"
        }
    ],
    "code": 200,
    "msg": "æŸ¥è¯¢æˆåŠŸ"
}
```

æŸ¥è¯¢è½¦ç‰Œäº¬RAAAAB

```
{
    "total": 15,
    "rows": [
        {
            "createBy": null,
            "createTime": "2025-12-10 13:01:31",
            "updateBy": null,
            "updateTime": "2025-12-10 13:01:31",
            "remark": null,
            "id": "2669",
            "providerId": 220,
            "preorderId": 1990322074609549386,
            "accessoryId": 2669,
            "accessoryAmount": 1,
            "accessoryName": "12.10",
            "providerUnitPrice": "111",
            "plateNumber": "äº¬RAAAAB",
            "status": 3,
            "preorderCode": "YDD1765342844974"
        },
        {
            "createBy": null,
            "createTime": "2025-12-05 18:38:29",
            "updateBy": null,
            "updateTime": "2025-12-05 18:38:29",
            "remark": null,
            "id": "2634",
            "providerId": 220,
            "preorderId": 1990322074609549380,
            "accessoryId": 2634,
            "accessoryAmount": 1,
            "accessoryName": "amount21312",
            "providerUnitPrice": "23",
            "plateNumber": "äº¬RAAAAB",
            "status": 1,
            "preorderCode": "YDD1764931092777"
        },
        {
            "createBy": null,
            "createTime": "2025-12-05 12:20:18",
            "updateBy": null,
            "updateTime": "2025-12-05 12:20:18",
            "remark": null,
            "id": "2620",
            "providerId": 220,
            "preorderId": 1990322074609549376,
            "accessoryId": 2620,
            "accessoryAmount": 1,
            "accessoryName": "qualityInspectionTime",
            "providerUnitPrice": "123",
            "plateNumber": "äº¬RAAAAB",
            "status": 3,
            "preorderCode": "YDD1764908358928"
        },
        {
            "createBy": null,
            "createTime": "2025-12-05 11:37:51",
            "updateBy": null,
            "updateTime": "2025-12-05 11:37:51",
            "remark": null,
            "id": "2616",
            "providerId": 220,
            "preorderId": 1990322074609549373,
            "accessoryId": 2616,
            "accessoryAmount": 1,
            "accessoryName": "TheTestMark",
            "providerUnitPrice": "2312",
            "plateNumber": "äº¬RAAAAB",
            "status": 3,
            "preorderCode": "YDD1764862272955"
        },
        {
            "createBy": null,
            "createTime": "2025-12-04 23:32:31",
            "updateBy": null,
            "updateTime": "2025-12-04 23:32:31",
            "remark": null,
            "id": "2617",
            "providerId": 220,
            "preorderId": 1990322074609549373,
            "accessoryId": 2617,
            "accessoryAmount": 1,
            "accessoryName": "123",
            "providerUnitPrice": "123",
            "plateNumber": "äº¬RAAAAB",
            "status": 3,
            "preorderCode": "YDD1764862272955"
        },
        {
            "createBy": null,
            "createTime": "2025-12-04 22:21:25",
            "updateBy": null,
            "updateTime": "2025-12-04 22:21:25",
            "remark": null,
            "id": "2611",
            "providerId": 220,
            "preorderId": 1990322074609549372,
            "accessoryId": 2611,
            "accessoryAmount": 1,
            "accessoryName": "claim_code",
            "providerUnitPrice": "123",
            "plateNumber": "äº¬RAAAAB",
            "status": 3,
            "preorderCode": "YDD1764857888101"
        },
        {
            "createBy": null,
            "createTime": "2025-12-04 15:08:50",
            "updateBy": null,
            "updateTime": "2025-12-04 15:08:50",
            "remark": null,
            "id": "2603",
            "providerId": 220,
            "preorderId": 1990322074609549364,
            "accessoryId": 2603,
            "accessoryAmount": 1,
            "accessoryName": "é…ä»¶åç§°",
            "providerUnitPrice": "123",
            "plateNumber": "äº¬RAAAAB",
            "status": 3,
            "preorderCode": "YDD1764747644968"
        },
        {
            "createBy": null,
            "createTime": "2025-12-03 15:33:23",
            "updateBy": null,
            "updateTime": "2025-12-03 15:33:23",
            "remark": null,
            "id": "2602",
            "providerId": 221,
            "preorderId": 1990322074609549363,
            "accessoryId": 2602,
            "accessoryAmount": 1,
            "accessoryName": "TESTåç§°",
            "providerUnitPrice": "500",
            "plateNumber": "äº¬RAAAAB",
            "status": 3,
            "preorderCode": "YDD1764746798119"
        },
        {
            "createBy": null,
            "createTime": "2025-12-03 15:09:19",
            "updateBy": null,
            "updateTime": "2025-12-03 15:09:19",
            "remark": null,
            "id": "2601",
            "providerId": 221,
            "preorderId": 1990322074609549362,
            "accessoryId": 2601,
            "accessoryAmount": 1,
            "accessoryName": "é…ä»¶åç§°1203",
            "providerUnitPrice": "1203",
            "plateNumber": "äº¬RAAAAB",
            "status": 3,
            "preorderCode": "YDD1764744987949"
        },
        {
            "createBy": null,
            "createTime": "2025-11-27 18:46:36",
            "updateBy": null,
            "updateTime": "2025-11-27 18:46:36",
            "remark": null,
            "id": "2599",
            "providerId": 220,
            "preorderId": 1990322074609549360,
            "accessoryId": 2599,
            "accessoryAmount": 1,
            "accessoryName": "test6",
            "providerUnitPrice": "2132",
            "plateNumber": "äº¬RAAAAB",
            "status": 3,
            "preorderCode": "YDD1764240348325"
        }
    ],
    "code": 200,
    "msg": "æŸ¥è¯¢æˆåŠŸ"
}
```