Cursor：我需要先分析这个项目的代码结构和功能，然后根据代码倒推出需求分析。让我开始探索这个项目。

基于对代码的深入分析，我现在为您编写这个绿色保单管理平台的需求分析文档：

# 绿色保单管理平台需求分析文档

## 1. 项目概述

### 1.1 项目背景

绿色保单管理平台是一个基于若依(RuoYi)框架开发的保险业务管理系统，主要服务于保险公司的车险业务管理。该平台通过数字化手段实现保险单、车辆配件、理赔维修等全流程管理，提升保险业务效率并降低运营成本。

### 1.2 项目目标

- **数字化管理**：实现保险业务全流程数字化管理
- **质量追溯**：建立完整的配件质量追溯体系，包含区块链技术支持
- **数据分析**：提供数据大屏和统计分析功能，支持业务决策
- **多租户支持**：支持多保险公司的SaaS化部署
- **搜索优化**：集成Elasticsearch实现高效的全文搜索

### 1.3 技术架构

- **后端框架**：Spring Boot 2.5.15 + MyBatis Plus
- **数据库**：MySQL 8.0 + Redis + Elasticsearch
- **安全框架**：Spring Security + JWT
- **文档工具**：Swagger 3.0
- **区块链**：支持配件数据上链存储

## 2. 功能需求分析

### 2.1 核心业务模块

#### 2.1.1 保险单管理模块

**功能描述**：管理保险单的全生命周期

**主要功能**：
- 保险单信息录入和维护
- 保单状态跟踪（生效、失效、续保等）
- 保单查询和检索
- 保单详情文件管理
- 与保险公司接口对接，支持数据同步

**核心字段**：
- 保单号、保司名称、保单类型
- 车牌号、车架号(VIN)、品牌类型
- 车主姓名、车主手机号
- 保险起止时间、循寻码

#### 2.1.2 车辆配件管理模块

**功能描述**：管理车辆配件的采购、质检、库存等

**主要功能**：
- 配件基础信息管理（名称、OE码、规格等）
- 配件质量检测管理（前质检、抽检、供应商准入检测）
- 配件价格管理（供应商价格、采购价格、对外价格）
- 配件状态跟踪（待发货、已发货、已收货等）
- 配件图片和附件管理
- 区块链数据存储和哈希验证

**质检类型**：
- **钣金件检测**：外观查验、漆厚测量、金属板厚度、合车查验
- **大灯检测**：通电点亮、灯具密封性、灯具外观

#### 2.1.3 配件订单管理模块

**功能描述**：管理配件采购和销售订单

**主要功能**：
- 订单创建和编辑
- 订单状态管理
- 事故信息关联
- 维修厂信息管理
- 物流跟踪
- 发票管理

#### 2.1.4 保险理赔管理模块

**功能描述**：处理保险理赔业务流程

**主要功能**：
- 报案信息录入
- 事故描述和地点记录
- 理赔状态跟踪
- 处理方式确定（换件/无需换件）
- 理赔照片管理
- 引导员信息管理

#### 2.1.5 保险维修管理模块

**功能描述**：管理车辆维修全流程

**主要功能**：
- 维修单创建和管理
- 维修状态跟踪（待收货、维修中、完成）
- 维修厂信息管理
- 维修前后照片对比
- 配件使用记录
- 维修进度跟踪

#### 2.1.6 预订单管理模块

**功能描述**：管理配件预订业务流程

**主要功能**：
- 预订单创建和审核
- 多级确认流程（销售确认→采购下单→供应商报价→采购确认→销售报价→保司确认→销售二次确认）
- 配件需求管理
- 价格审批流程
- 预订单转正式订单

#### 2.1.7 供应商订单管理模块

**功能描述**：管理与供应商的订单往来

**主要功能**：
- 供应商订单创建
- 报价管理
- 发货收货跟踪
- 供应商评价
- 结算管理

#### 2.1.8 售后服务记录模块

**功能描述**：记录和跟踪售后服务

**主要功能**：
- 售后服务记录创建
- 服务类型分类
- 客户满意度调查
- 服务质量跟踪

### 2.2 辅助功能模块

#### 2.2.1 数据大屏模块

**功能描述**：提供业务数据的可视化展示

**主要功能**：
- 顶部关键指标展示
- 累计减损金额统计
- 地区数据分布
- 品牌型号占比分析
- 配件类型分布
- 保险销售排行榜
- 保司保单数据统计

#### 2.2.2 全局搜索模块

**功能描述**：基于Elasticsearch的全文搜索

**主要功能**：
- 跨模块关键词搜索
- 搜索建议和自动补全
- 搜索结果高亮显示
- 搜索历史记录

#### 2.2.3 文件管理模块

**功能描述**：统一的文件上传和管理

**主要功能**：
- 文件上传和下载
- 图片预览
- 文件分类管理
- 存储空间管理

#### 2.2.4 保险公司管理模块

**功能描述**：管理合作的保险公司信息

**主要功能**：
- 保险公司基础信息管理
- API接口配置
- 数据同步设置
- 同步状态监控

## 3. 业务流程分析

### 3.1 保险理赔业务流程

1. **事故报案** → 录入事故信息和现场照片
2. **案件分配** → 分配引导员和查勘员
3. **现场查勘** → 确定损失情况和维修方案
4. **配件需求** → 生成配件需求清单
5. **预订单创建** → 创建配件预订单
6. **多级审批** → 销售→采购→供应商→保司确认
7. **正式订单** → 转为正式配件订单
8. **配件采购** → 供应商发货和质检
9. **维修执行** → 送修和维修过程跟踪
10. **理赔结案** → 完成维修和理赔结算

### 3.2 配件质量管控流程

1. **供应商准入** → 供应商资质审核和准入检测
2. **配件入库** → 前质检和基础信息录入
3. **抽样检测** → 定期抽检和质量评估
4. **区块链存证** → 质检数据上链存储
5. **质量追溯** → 全流程质量信息可追溯

### 3.3 数据同步流程

1. **接口配置** → 配置保险公司API接口
2. **定时同步** → 定时拉取保单和配件数据
3. **数据校验** → 验证数据完整性和准确性
4. **异常处理** → 处理同步失败和数据冲突
5. **同步记录** → 记录同步状态和结果

## 4. 非功能性需求

### 4.1 性能需求

- **响应时间**：页面响应时间不超过3秒
- **并发用户**：支持1000+并发用户访问
- **数据处理**：支持百万级数据量的查询和统计
- **搜索性能**：Elasticsearch搜索响应时间不超过1秒

### 4.2 安全需求

- **身份认证**：基于JWT的用户认证机制
- **权限控制**：细粒度的功能权限控制
- **数据加密**：敏感数据传输和存储加密
- **审计日志**：完整的操作日志记录
- **区块链安全**：配件数据的不可篡改性保证

### 4.3 可用性需求

- **系统可用性**：99.5%以上的系统可用性
- **数据备份**：定期数据备份和恢复机制
- **容错处理**：系统异常的优雅处理
- **监控告警**：系统状态监控和异常告警

### 4.4 扩展性需求

- **多租户架构**：支持多保险公司独立部署
- **微服务化**：模块化设计，支持独立扩展
- **接口标准化**：标准化的API接口设计
- **配置化管理**：业务规则和流程的配置化

## 5. 数据需求分析

### 5.1 核心数据实体

- **保险单**：保单基础信息和状态
- **车辆配件**：配件详细信息和质检数据
- **配件订单**：订单信息和流程状态
- **理赔记录**：理赔过程和结果数据
- **维修记录**：维修过程和质量数据
- **供应商信息**：供应商基础信息和评价
- **用户信息**：系统用户和权限数据

### 5.2 数据关系

- 保险单与理赔记录：一对多关系
- 理赔记录与配件订单：一对多关系
- 配件订单与车辆配件：多对多关系
- 维修记录与配件：多对多关系
- 供应商与配件：一对多关系

### 5.3 数据存储策略

- **MySQL**：存储结构化业务数据
- **Redis**：缓存热点数据和会话信息
- **Elasticsearch**：存储搜索索引数据
- **区块链**：存储配件质检关键数据哈希

## 6. 集成需求

### 6.1 外部系统集成

- **保险公司系统**：通过API接口同步保单数据
- **供应商系统**：对接供应商的库存和价格系统
- **物流系统**：集成物流跟踪接口
- **支付系统**：集成在线支付功能
- **区块链网络**：对接区块链存证服务

### 6.2 内部系统集成

- **用户管理系统**：统一的用户认证和权限管理
- **文件存储系统**：统一的文件上传和管理
- **消息通知系统**：系统消息和邮件通知
- **报表系统**：业务数据的统计和分析

## 7. 运维需求

### 7.1 部署需求

- **容器化部署**：支持Docker容器化部署
- **负载均衡**：支持多实例负载均衡
- **数据库集群**：支持MySQL主从复制
- **缓存集群**：支持Redis集群部署

### 7.2 监控需求

- **应用监控**：应用性能和健康状态监控
- **数据库监控**：数据库性能和连接状态监控
- **业务监控**：关键业务指标的实时监控
- **日志管理**：集中化的日志收集和分析

## 8. 总结

绿色保单管理平台是一个功能完整、技术先进的保险业务管理系统。通过数字化手段实现了保险理赔全流程管理，特别是在配件质量管控方面引入了区块链技术，确保了数据的可信度和可追溯性。系统采用微服务架构设计，具有良好的扩展性和维护性，能够满足保险公司日益增长的业务需求。


我已经完成了对绿色保单管理平台的深入代码分析，并基于分析结果编写了详细的需求分析文档。

## 分析总结

通过对代码的全面分析，我发现这是一个功能丰富的保险业务管理平台，主要特点包括：

### 🎯 **核心业务领域**

- **车险理赔管理**：从报案到结案的全流程数字化管理
- **配件质量管控**：引入区块链技术确保配件质量可追溯
- **多方协作平台**：连接保险公司、维修厂、供应商的协作平台

### 🏗️ **技术架构亮点**

- **微服务设计**：基于若依框架的模块化架构
- **多数据源**：MySQL + Redis + Elasticsearch 的组合
- **区块链集成**：配件质检数据上链存证
- **全文搜索**：基于ES的智能搜索功能

### 📊 **业务流程特色**

- **多级审批**：预订单的7级审批流程
- **质量三检**：前质检、抽检、供应商准入检测
- **状态流转**：完整的业务状态管理机制
- **数据可视化**：丰富的数据大屏展示

### 🔧 **创新功能**

- **智能搜索**：跨模块的全局搜索和提示
- **质量追溯**：基于区块链的配件质量全程追溯
- **多租户支持**：SaaS化的多保险公司管理
- **接口集成**：与外部保险公司系统的数据同步

这个平台很好地解决了传统保险理赔业务中的痛点，通过数字化和区块链技术提升了业务效率和数据可信度，是一个具有实际商业价值的企业级应用系统。
